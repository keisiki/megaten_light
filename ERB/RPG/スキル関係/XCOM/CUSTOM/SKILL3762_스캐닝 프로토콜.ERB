;그렘인 전용 스캐닝 기술.
;모든 적 완전 해석

;스킬명
@SKILL_NAME_3762,ARG
#LOCALSIZE 2
#LOCALSSIZE 2
RESULTS = 스캐닝 프로토콜

;　명중
@SKILL_HITRATE_3762, ARG
#LOCALSIZE 2
#LOCALSSIZE 2
RETURN 0

;　위력
@SKILL_POWER_3762, ARG
#LOCALSIZE 2
#LOCALSSIZE 2
RETURN 0

;　최저공격횟수
@SKILL_MINATTACKNUMBER_3762,ARG
#LOCALSIZE 2
#LOCALSSIZE 2
RETURN 0

;　최대공격횟수
@SKILL_MAXATTACKNUMBER_3762,ARG
#LOCALSIZE 2
#LOCALSSIZE 2
RETURN 0

;　ＨＰ를 소모하면 2 ＭＰ를 소모하면 3
@SKILL_COSTTYPE_3762, ARG
#LOCALSIZE 2
#LOCALSSIZE 2
RETURN 1
;소모없음＝1

;　비용의 양
@SKILL_COST_3762,ARG
#LOCALSIZE 2
#LOCALSSIZE 2
RETURN 0

;　상성
@SKILL_TYPE_3762,ARG
#LOCALSIZE 2
#LOCALSSIZE 2
RETURN GET_TYPE_NUM("만능")
;상성 없음

;　EXTRA면 1, MAGIC이면 2
@SKILL_DECIDE_TYPE_3762, ARG
#LOCALSIZE 2
#LOCALSSIZE 2
RETURN 1
;EXTRA.

;　물리 타격 판정 1 마법 타격 판정2
@SKILL_DAMAGETYPE_3762, ARG
#LOCALSIZE 2
#LOCALSSIZE 2
RETURN 0

;　공격대상 : 1적 2아군 3 전체 4특수
@SKILL_TARGET_3762
#LOCALSIZE 2
#LOCALSSIZE 2
RETURN 1

;　사거리
@SKILL_RANGE_3762,ARG
#LOCALSIZE 2
#LOCALSSIZE 2
RETURN 3

;　범위　1 1체　2 1열　3 전체　4 적아군전체
@SKILL_SPHERE_3762,ARG
#LOCALSIZE 2
#LOCALSSIZE 2
RETURN 3

;　 효과타입　1공격、2회복、3상태변화、4특수、5상태회복
@SKILL_EFECT_3762
#LOCALSIZE 2
#LOCALSSIZE 2
RETURN 4

;계승타입
@SKILL_SUCCESSION_TYPE_3762
#LOCALSIZE 2
#LOCALSSIZE 2
RETURN 5
;지원

;계승불능
@継承不能_3762
#LOCALSIZE 2
#LOCALSSIZE 2
RETURN 1

;속도수정
@SKILL_SPEED_3762, ARG = -1
#LOCALSIZE 2
#LOCALSSIZE 2
RETURN 10

;　구상의 표시와 그 타입
@SKILL_MESSAGE_3762,ARG
#LOCALSIZE 2
#LOCALSSIZE 2

;전투시 이외에 사용 가능한가
@SKILL_ACTIONABLE_FIELD_3762
#LOCALSIZE 2
#LOCALSSIZE 2
RETURN 0

;스킬変化？用랭크
@SKILL_RANK_3762
#LOCALSIZE 2
#LOCALSSIZE 2
RETURN 1

;====================================================
;스킬及び行動の実行
;====================================================
@ACTION_3762,ARG,ARG:1
#LOCALSIZE 6
#LOCALSSIZE 2
FOR ARG:1, 7, 17
LOCAL = POS(ARG:1)
SIF LOCAL == -1
CONTINUE
LOCAL:2 = RAND:100
PRINT [스캐닝 프로토콜 작동!].....
LOCAL:3 = LIMIT((BASE:ARG:LV + (BASE:ARG:지혜 + BASE:ARG:운) * 2 - BASE:LOCAL:LV), 10, 95)
;PRINTFORM ({LOCAL:3}％).....
IF LOCAL:2 < LOCAL:3
	IF LOCAL:2 < BASE:ARG:운
		LOCAL:4 = 1000;FLAG:(20000+NO:LOCAL) < 100 ? 200 # 150
		PRINT [목표 포착!]
	ELSE
		LOCAL:4 = 1000;FLAG:(20000+NO:LOCAL) < 100 ? 100 # 75
		PRINT [목표 포착!]
	ENDIF
ELSE
	LOCAL:4 = 1000;FLAG:(20000+NO:LOCAL) < 100 ? 30 # 15
	PRINT [목표 포착!]
ENDIF
;ボスの場合は解析度上昇量が半減する
SIF CFLAG:LOCAL:ボスフラグ
	LOCAL:4 /= 2

PRINTL
PRINTFORM 　%CALLNAME:(LOCAL)% 

CALL INCREASE_ANALYZE, (NO:LOCAL), LOCAL:4

;アンノウンフラグが解除される
IF CFLAG:LOCAL:アンノウンフラグ == 1
	CFLAG:LOCAL:アンノウンフラグ = 0
	IF NAME:LOCAL == "？？？？"
		NAME:LOCAL = %CSVNAME(NO:LOCAL,0)%
		CALLNAME:LOCAL = %CSVCALLNAME(NO:LOCAL,0)%
	ENDIF
	PRINTFORM ＝＞　%CALLNAME:(LOCAL)% 
ENDIF

PRINTFORML 스캔 \@FLAG:(20000+NO:LOCAL) >= 2000 ? 완료! # {FLAG:(20000+NO:LOCAL)/10}％ \@

NEXT

;====================================================
;実行内容ここまで
;====================================================
;　 説明文の表示
@SKILL_EXPLAIN_3762
#LOCALSIZE 2
#LOCALSSIZE 2
PRINTL [특수] 그렘린에 있는 스캐닝 능력.
PRINTL 마주친 모든 적을 완전히 해석한다. 최대 2회 사용시 해석률 100%를 보장한다.

;사용조건
@SKILL_SPECIAL_ACTIONABLE_3762,ARG
#LOCALSIZE 2
#LOCALSSIZE 2
RETURN 1
;특별히 없음