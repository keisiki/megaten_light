;==============================
;솜씨 및 소질에 따라 포인트 창출 계산
;ARG - 연주자 캐릭번호
;==============================
@CONCERT_TALENT_CHECKING, ARG

;사용하는 일시변수의 초기화
A = 0
B = 0
S = 0
V = 0
C = 0
D = 0
G = 0

;노예의 가창기능과 가창경험의 레벨에 의해 값의 기초값이 상승
IF ABL:ARG:가창기능 <= 2
	S += 50
ELSEIF ABL:ARG:가창기능 == 3
	S += 80
ELSEIF ABL:ARG:가창기능 == 4
	S += 120
ELSEIF ABL:ARG:가창기능 == 5
	S += 190
ELSEIF ABL:ARG:가창기능 == 6
	S += 240
ELSEIF ABL:ARG:가창기능 == 7
	S += 310
ELSEIF ABL:ARG:가창기능 == 8
	S += 380
ELSEIF ABL:ARG:가창기능 == 9
	S += 420
ELSE
	S += 500
ENDIF

IF EXP:ARG:가창경험 < EXPLV:1
	D += 1
ELSEIF EXP:ARG:가창경험 < EXPLV:2
	D += 10
ELSEIF EXP:ARG:가창경험 < EXPLV:3
	D += 50
ELSEIF EXP:ARG:가창경험 < EXPLV:4
	D += 90
ELSEIF EXP:ARG:가창경험 < EXPLV:5
	D += 150
ELSE
	D += 180
ENDIF
S += D

V = 100
IF ABL:ARG:순종 == 0
	C = 0
ELSEIF ABL:ARG:순종 == 1
	C = 10
ELSEIF ABL:ARG:순종 == 2
	C = 20
ELSEIF ABL:ARG:순종 == 3
	C = 30
ELSEIF ABL:ARG:순종 == 4
	C = 40
ELSEIF ABL:ARG:순종 == 5
	C = 50
ELSEIF ABL:ARG:순종 == 6
	C = 60
ELSEIF ABL:ARG:순종 == 7
	C = 70
ELSEIF ABL:ARG:순종 == 8
	C = 80
ELSEIF ABL:ARG:순종 == 9
	C = 90
ELSE
	C = 100
ENDIF
V += C

IF ABL:ARG:기교 == 0
	C = 0
ELSEIF ABL:ARG:기교 == 1
	C = 5
ELSEIF ABL:ARG:기교 == 2
	C = 10
ELSEIF ABL:ARG:기교 == 3
	C = 15
ELSEIF ABL:ARG:기교 == 4
	C = 20
ELSEIF ABL:ARG:기교 == 5
	C = 25
ELSEIF ABL:ARG:기교 == 6
	C = 30
ELSEIF ABL:ARG:기교 == 7
	C = 35
ELSEIF ABL:ARG:기교 == 8
	C = 40
ELSEIF ABL:ARG:기교 == 9
	C = 45
ELSE
	C = 50
ENDIF
V += C

IF ABL:ARG:봉사정신 == 0
	C = 0
ELSEIF ABL:ARG:봉사정신 == 1
	C = 5
ELSEIF ABL:ARG:봉사정신 == 2
	C = 10
ELSEIF ABL:ARG:봉사정신 == 3
	C = 15
ELSEIF ABL:ARG:봉사정신 == 4
	C = 20
ELSEIF ABL:ARG:봉사정신 == 5
	C = 25
ELSEIF ABL:ARG:봉사정신 == 6
	C = 30
ELSEIF ABL:ARG:봉사정신 == 7
	C = 35
ELSEIF ABL:ARG:봉사정신 == 8
	C = 40
ELSEIF ABL:ARG:봉사정신 == 9
	C = 45
ELSE
	C = 50
ENDIF
V += C

;함락素質
IF TALENT:ARG:연모
	V += 100
ENDIF
IF TALENT:ARG:친애
	V += 200
ENDIF

;그외素質
IF TALENT:ARG:겁쟁이
	V += 10
ENDIF
IF TALENT:ARG:반항적
	V -= 10
ENDIF
IF TALENT:ARG:꿋꿋함
	V += 20
ENDIF
IF TALENT:ARG:솔직함
	V += 10
ENDIF
IF TALENT:ARG:얌전함
	V += 10
ENDIF
IF TALENT:ARG:프라이드높음
	V -= 10
ENDIF
IF TALENT:ARG:건방짐
	C = 10
	V -= 10
ENDIF
IF TALENT:ARG:프라이드낮음
	V += 10
ENDIF
IF TALENT:ARG:츤데레
	V += 20
ENDIF
IF TALENT:ARG:자제심
	V += 10
ENDIF
IF TALENT:ARG:무관심
	V -= 10
ENDIF
IF TALENT:ARG:감정결핍
	V -= 10
ENDIF
IF TALENT:ARG:일선을넘지않음
	V += 15
ENDIF
IF TALENT:ARG:눈에띄고싶어함
	V += 10
ENDIF
IF TALENT:ARG:정조관념
	V += 10
ENDIF
IF TALENT:ARG:정조관결여
	V -= 10
ENDIF
IF TALENT:ARG:습득빠름
	V += 10
ENDIF
IF TALENT:ARG:습득느림
	V -= 10
ENDIF
IF TALENT:ARG:헌신적
	V += 15
ENDIF
IF TALENT:ARG:남성혐오
	V -= 20
ENDIF
IF TALENT:ARG:망신
	V += 15
ENDIF
IF TALENT:ARG:소악마
	V += 10
ENDIF
IF TALENT:ARG:여성혐오
	V -= 20
ENDIF
IF TALENT:ARG:요호
	V += 10
ENDIF
IF TALENT:ARG:매력
	V += 10
ENDIF
IF TALENT:ARG:수수께끼의매력
	V += 50
ENDIF
IF TALENT:ARG:빈유
	V -= 10
ENDIF
IF TALENT:ARG:절벽
	V -= 20
ENDIF
IF TALENT:ARG:거유
	V += 20
ENDIF
IF TALENT:ARG:폭유
	V += 10
ENDIF
IF TALENT:ARG:흡혈귀
	V -= 10
ENDIF
IF TALENT:ARG:동물귀
	V += 10
ENDIF
IF TALENT:ARG:인기
	V += 25
ENDIF
IF TALENT:ARG:임신
	V += 30
ENDIF
IF TALENT:ARG:모성
	V += 60
ENDIF

;보정치가 0이하인 경우는 1로
SIF V <= 0
	V = 1

;보정치의 적용
S *= V
S /= 100

;붕괴,광기は利潤をかなり低くする（순종によって、80％まで회복）
IF TALENT:ARG:붕괴 || TALENT:ARG:광기
PRINTL 
	IF TALENT:ARG:붕괴
		S *= ABL:ARG:순종
		TIMES S , 0.08
		Z = ABL:ARG:순종
		Z *= 8
	ELSEIF TALENT:ARG:광기
		S *= ABL:ARG:순종
		TIMES S , 0.08
		Z = ABL:ARG:순종
		Z *= 8
	ENDIF
PRINTL 
ENDIF

;소지施設
IF ITEM:무도관 == 1
	TIMES S , 1.40
ELSEIF ITEM:라이브하우스 == 1
	TIMES S , 1.10
ENDIF

;難易度処理
;EASY
IF FLAG:조교난이도 == 1
	TIMES S , 1.20
;NORMAL
ELSEIF FLAG:조교난이도 == 2
	TIMES S , 1.00
;HARD
ELSEIF FLAG:조교난이도 == 3
	TIMES S , 0.80
ENDIF

IF RAND:2 == 0
	TIMES Z , 0.05
	S += Z
ELSE
	TIMES Z , 0.05
	S -= Z
ENDIF

RETURN S